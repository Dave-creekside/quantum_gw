<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Gravitational Wave Detector</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Add Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <h1>QGW Detector</h1>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="#" id="nav-dashboard" class="active"><i class="fas fa-tachometer-alt"></i> <span>Dashboard</span></a></li>
                <li><a href="#" id="nav-config"><i class="fas fa-cog"></i> <span>Configuration</span></a></li>
                <li><a href="#" id="nav-pipelines"><i class="fas fa-project-diagram"></i> <span>Pipelines</span></a></li>
                <li><a href="#" id="nav-results"><i class="fas fa-chart-bar"></i> <span>Results</span></a></li>
                <li><a href="#" id="nav-sweeps"><i class="fas fa-sliders-h"></i> <span>Parameter Sweeps</span></a></li>
                <li><a href="#" id="nav-projects"><i class="fas fa-save"></i> <span>Projects</span></a></li>
                <li><a href="#" id="nav-visualizations"><i class="fas fa-chart-line"></i> <span>Visualizations</span></a></li>
            </ul>
        </nav>
        <div class="theme-toggle">
            <label for="theme-switch" class="theme-switch-label">
                <i class="fas fa-sun"></i> <!-- Light mode icon -->
                <input type="checkbox" id="theme-switch" class="theme-switch-checkbox">
                <span class="theme-switch-slider"></span>
                <i class="fas fa-moon"></i> <!-- Dark mode icon -->
            </label>
        </div>
        <div id="header-spinner" class="spinner hidden"></div> <!-- Add spinner here -->
    </header>

    <main id="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard-panel" class="panel active">
            <h2>Quantum Gravitational Wave Detector Dashboard</h2>
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Quick Start</h3>
                    <p>Run a preset pipeline to detect gravitational waves using quantum circuits.</p>
                    <button id="quick-run-preset" class="primary-button">Run Preset Pipeline</button>
                </div>
                <div class="dashboard-card">
                    <h3>System Stats <button id="refresh-stats-btn" class="icon-button" title="Refresh Stats"><i class="fas fa-sync-alt"></i></button></h3>
                    <div id="dashboard-system-stats" class="stats-container">
                        <!-- CPU -->
                        <div class="stat-item">
                            <span class="stat-label">CPU</span>
                            <div class="stat-bar-container cpu-bar-container">
                                <div class="stat-bar cpu-bar" style="width: 0%;"></div>
                                <span class="stat-value">Loading...</span>
                            </div>
                        </div>
                        <!-- RAM -->
                        <div class="stat-item">
                            <span class="stat-label">RAM</span>
                            <div class="stat-bar-container ram-bar-container">
                                <div class="stat-bar ram-bar" style="width: 0%;"></div>
                                <span class="stat-value">Loading...</span>
                            </div>
                        </div>
                        <!-- GPU -->
                        <div class="stat-item">
                            <span class="stat-label">GPU</span>
                            <div class="stat-bar-container gpu-bar-container">
                                <div class="stat-bar gpu-bar" style="width: 0%;"></div>
                                <span class="stat-value">Loading...</span>
                            </div>
                        </div>
                        <!-- VRAM -->
                        <div class="stat-item">
                            <span class="stat-label">VRAM</span>
                            <div class="stat-bar-container vram-bar-container">
                                <div class="stat-bar vram-bar" style="width: 0%;"></div>
                                <span class="stat-value">Loading...</span>
                            </div>
                        </div>
                    </div>
                    <p id="gpu-details" class="gpu-details">Loading GPU details...</p>
                </div>
                <div class="dashboard-card"> <!-- Moved About section -->
                    <h3>About QGW Detector</h3>
                    <p>The Quantum Gravitational Wave Detector simulates how gravitational waves affect entangled quantum systems. The project demonstrates a novel approach to gravitational wave detection by modeling phase shifts in entangled qubits caused by spacetime distortions.</p>
                </div>
            </div>
        </section>

        <!-- Configuration Section -->
        <section id="config-panel" class="panel">
            <h2>Detector Configuration</h2>
            <div class="config-form">
                <div class="form-group">
                    <label for="event-name">Event:</label>
                    <select id="event-name"></select>
                    <span class="form-help">Select the gravitational wave event to analyze</span>
                </div>
                
                <div class="form-group">
                    <label for="downsample-factor">Downsample Factor:</label>
                    <input type="number" id="downsample-factor" min="1" max="1000">
                    <span class="form-help">Factor to downsample LIGO data (recommended: 100-500)</span>
                </div>
                
                <div class="form-group">
                    <label for="scale-factor">Scale Factor:</label>
                    <input type="number" id="scale-factor" step="1e19">
                    <span class="form-help">Amplification factor for strain values (e.g. 1e21)</span>
                </div>
                
                <div class="form-group">
                    <label for="use-gpu">GPU Acceleration:</label>
                    <input type="checkbox" id="use-gpu">
                    <span class="form-help">Enable GPU acceleration for quantum circuit simulation</span>
                </div>
                
                <div class="form-group">
                    <label for="use-zx-opt">ZX-Calculus Optimization:</label>
                    <input type="checkbox" id="use-zx-opt">
                    <span class="form-help">Enable ZX-calculus optimization for quantum circuits</span>
                </div>
                
                <div class="form-group" id="zx-opt-level-group">
                    <label for="zx-opt-level">ZX Optimization Level:</label>
                    <select id="zx-opt-level">
                        <option value="1">Level 1: Basic Clifford optimization</option>
                        <option value="2">Level 2: Full reductions</option>
                        <option value="3">Level 3: Aggressive optimization</option>
                    </select>
                    <span class="form-help">Higher levels provide more optimization but may take longer</span>
                </div>
                
                <div class="form-actions">
                    <button id="save-config" class="primary-button">Save Configuration</button>
                    <button id="reset-config" class="secondary-button">Reset to Defaults</button>
                </div>

                <div id="config-status" class="status-message"></div>
            </div>
        </section>

        <!-- Pipeline Execution Section -->
        <section id="pipelines-panel" class="panel">
            <h2>Run Pipeline</h2>
            
            <div class="tabs">
                <button class="tab-btn active" data-tab="preset">Preset Pipeline</button>
                <button class="tab-btn" data-tab="custom">Custom Pipeline</button>
            </div>
            
            <div id="preset-tab" class="tab-content active">
                <div class="form-group">
                    <label for="preset-select">Select Preset:</label>
                    <select id="preset-select"></select>
                </div>
                <div id="preset-description" class="pipeline-description"></div>
                <button id="run-preset" class="primary-button">Run Preset</button>
            </div>
            
            <div id="custom-tab" class="tab-content">
                <h3>Create Custom Pipeline</h3>
                <p>Build a multi-stage detector pipeline by adding stages below.</p>
                
                <div id="pipeline-stages">
                    <!-- Dynamic stages will be added here -->
                </div>
                
                <button id="add-stage" class="secondary-button">Add Stage</button>
                <button id="run-custom" class="primary-button">Run Custom Pipeline</button>
            </div>
            
            <div id="pipeline-result" class="result-container">
                <!-- Results will be displayed here after running a pipeline -->
            </div>
        </section>

        <!-- Results Section -->
        <section id="results-panel" class="panel">
            <h2>Saved Results</h2>
            
            <div id="results-list">
                <p>Loading saved results...</p>
            </div>
            
            <div id="result-detail" class="result-container">
                <p>Select a result to view details</p>
            </div>
        </section>

        <!-- Parameter Sweeps Section -->
        <section id="sweeps-panel" class="panel">
            <h2>Parameter Sweeps</h2>
            
            <div class="tabs">
                <button class="tab-btn active" data-tab="qubit-sweep">Qubit Count</button>
                <button class="tab-btn" data-tab="topology-sweep">Topology</button>
                <button class="tab-btn" data-tab="scale-sweep">Scale Factor</button>
            </div>
            
            <div id="qubit-sweep-tab" class="tab-content active">
                <h3>Qubit Count Sweep</h3>
                <div class="form-group">
                    <label for="qubit-sweep-topology">Topology:</label>
                    <select id="qubit-sweep-topology">
                        <option value="star">Star</option>
                        <option value="linear">Linear</option>
                        <option value="full">Full</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="qubit-sweep-counts">Qubit Counts:</label>
                    <div class="checkbox-group" id="qubit-sweep-counts">
                        <label><input type="checkbox" value="4"> 4 qubits</label>
                        <label><input type="checkbox" value="6"> 6 qubits</label>
                        <label><input type="checkbox" value="8"> 8 qubits</label>
                    </div>
                </div>
                <button id="run-qubit-sweep" class="primary-button">Run Sweep</button>
            </div>
            
            <div id="topology-sweep-tab" class="tab-content">
                <h3>Topology Sweep</h3>
                <div class="form-group">
                    <label for="topology-sweep-qubits">Qubit Count:</label>
                    <select id="topology-sweep-qubits">
                        <option value="4">4 qubits</option>
                        <option value="6">6 qubits</option>
                        <option value="8">8 qubits</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="topology-sweep-types">Topologies:</label>
                    <div class="checkbox-group" id="topology-sweep-types">
                        <label><input type="checkbox" value="star"> Star</label>
                        <label><input type="checkbox" value="linear"> Linear</label>
                        <label><input type="checkbox" value="full"> Full</label>
                    </div>
                </div>
                <button id="run-topology-sweep" class="primary-button">Run Sweep</button>
            </div>
            
            <div id="scale-sweep-tab" class="tab-content">
                <h3>Scale Factor Sweep</h3>
                <div class="form-group">
                    <label>Pipeline Configuration:</label>
                    <div class="mini-config">
                        <select id="scale-sweep-qubits">
                            <option value="4">4 qubits</option>
                            <option value="6">6 qubits</option>
                            <option value="8">8 qubits</option>
                        </select>
                        <select id="scale-sweep-topology">
                            <option value="star">Star</option>
                            <option value="linear">Linear</option>
                            <option value="full">Full</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="scale-factors">Scale Factors:</label>
                    <input type="text" id="scale-factors" placeholder="e.g. 1e19,1e20,1e21">
                    <span class="form-help">Enter values in scientific notation, separated by commas</span>
                </div>
                <button id="run-scale-sweep" class="primary-button">Run Sweep</button>
            </div>
            
            <div id="sweep-result" class="result-container">
                <!-- Sweep results will be displayed here -->
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects-panel" class="panel">
            <h2>Project Workspace</h2>

            <div id="active-project-display" class="active-project-banner">
                Active Project: None (Unsaved)
            </div>

            <div class="card">
                <h3>Create New Project</h3>
                <p>Create a new workspace based on the current configuration.</p>
                <div class="form-group">
                    <label for="project-name">New Project Name:</label>
                    <input type="text" id="project-name" placeholder="Enter a name for the new project">
                </div>
                <button id="create-project-button" class="primary-button">Create Project</button>
            </div>

            <div class="card">
                 <!-- Removed Manage Projects section -->
                 <h4>Existing Projects</h4>
                 <div id="projects-list-container"> <!-- Renamed ID -->
                     <p>Loading projects...</p>
                 </div>
            </div>
        </section>

        <!-- Visualizations Section -->
        <section id="visualizations-panel" class="panel">
            <h2>Visualizations</h2>
            
            <div class="project-selector">
                <h3>Select Project</h3>
                <div class="form-group">
                    <label for="visualization-project-select">Project:</label>
                    <select id="visualization-project-select"></select>
                </div>
                <div class="form-group">
                    <label for="visualization-run-select">Run:</label>
                    <select id="visualization-run-select">
                        <option disabled selected>Select a project first</option>
                    </select>
                </div>
                <!-- Removed Load Visualization button as selection triggers load -->
            </div>

            <div id="visualization-container" class="visualization-container">
                <p>Select a project to view its visualizations.</p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Quantum Gravitational Wave Detector Project</p>
    </footer>

    <!-- Removed full screen loading overlay -->

    <!-- JavaScript Modules -->
    <script src="js/api.js"></script>
    <script src="js/config.js"></script>
    <script src="js/pipelines.js"></script>
    <script src="js/results.js"></script>
    <script src="js/sweeps.js"></script>
    <script src="js/visualizations.js"></script> <!-- Load Visualizations before Projects -->
    <script src="js/projects.js"></script> <!-- Load Projects before App -->
    <script src="js/app.js"></script> <!-- App should be last -->

    <!-- System stats have been restored; modal removed -->
</body>
</html>
